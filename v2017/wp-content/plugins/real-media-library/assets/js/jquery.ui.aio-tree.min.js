/*!
 * Last minify build by MatthiasWeb: 03. July 2017, 10:48 german time / Mon Jul 03 10:48:38 UTC 2017
 */

"use strict";(function($){Function.prototype.bind=function(){}.bind||function(b){if(typeof this!=="function"){throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable")}function c(){}var a=[].slice,f=a.call(arguments,1),e=this,d=function(){return e.apply(this instanceof c?this:b||window,f.concat(a.call(arguments)))};c.prototype=this.prototype;d.prototype=new c;return d};Array.prototype.indexOf||(Array.prototype.indexOf=function(a,b){for(var c=b||0,d=this.length;c<d;c++)if(this[c]===a)return c;return-1});if($.mjs&&$.mjs.nestedSortable){$.widget("mguenter.nestedSortable",$.extend({},$.mjs.nestedSortable.prototype,{_mouseDrag:function(event){$.mjs.nestedSortable.prototype._mouseDrag.apply(this,arguments);if($(event.srcElement).parents(".aio-nodes").size()>0){var left=event.clientX,top=event.clientY;var item,itemElement,i,minLeft,minTop,maxLeft,maxTop,foundItem=false;for(i=this.items.length-1;i>=0;i--){item=this.items[i];minLeft=item.left;minTop=item.top;maxLeft=minLeft+item.width;maxTop=minTop+item.height;if(left>=minLeft&&left<=maxLeft&&top>=minTop&&top<=maxTop&&!this.currentContainer.currentItem.is(item.item)){event.hoverListElement=item.item;this._trigger("hoverListElement",event,this._uiHash());foundItem=true}}if(!foundItem){this._trigger("noHoverListElement",event,this._uiHash())}}}}))}$(document).on("click focus",'.aio-tree [disabled="disabled"]',function(event){event.preventDefault();$(document.activeElement).blur();return false});var ContainerHandler=function(e){this._usedOpposite=null;this._usedCollapsable=false;this._useCollapsableLocalStorage=false;this.init(e)};ContainerHandler.prototype.init=function(e){if(!e._generatedId&&e.options.container.isCollapsable){this._doCollapsable(e)}else{e._nodes.find("li").addClass("aio-open")}this._doResizable(e);$(document).on("click","."+e._eventClassId+" .aio-list-standard a",function(event){if(typeof e.options.others.onSwitchFolder==="function"&&!$(this).hasClass("aio-disable-link")){return e.options.others.onSwitchFolder.bind(e.element)($(this),event)}})},ContainerHandler.prototype.sticky=function(e){if(e.options.container.isSticky){if(typeof $.fn.hcSticky!=="undefined"){if(e.element.data("sticky")){e.element.hcSticky("reinit");return}e.element.hcSticky(e.options.container.hcStickySettings);e.element.data("sticky",true)}else{throw"If want to use the sticky container please include the HC Sticky jQuery plugin, see http://someweblog.com/hcsticky-jquery-floating-sticky-plugin/ !"}}},ContainerHandler.prototype._doTooltips=function(e){var callback=e.options.container.onDoTooltips;if(typeof callback==="function"){callback.bind(e)()}else{if(typeof $.fn.tooltipster==="function"){var title,text,disabledLinkText,html;$(".aio-tooltip").each(function(){title=$(this).attr("data-aio-tooltip-title");text=$(this).attr("data-aio-tooltip-text");disabledLinkText=$(this).attr("data-aio-tooltip-text-disabled");if($(this).hasClass("aio-disable-link")){text=disabledLinkText}if(title.length>0||text.length>0){html=(title.length>0?'<div class="aio-tooltip-title">'+title+"</div>":"")+'<div class="aio-tooltip-text">'+text+"</p>";if($(this).hasClass("tooltipstered")){try{$(this).tooltipster("destroy")}catch(error){}}$(this).tooltipster($.extend({content:html,contentAsHTML:true,theme:"tooltipster-aio",animation:"grow",maxWidth:225},e.options.container.tooltipsterSettings))}})}else{throw"Please include tooltipster jQuery plugin (http://iamceege.github.io/tooltipster/)"}}},ContainerHandler.prototype._doCollapsable=function(e){this._usedCollapsable=true;this._useCollapsableLocalStorage=e._localStorage&&e.options.container.collapsableLocalstorage;this._updateCollapsableNodes(e);var _useCollapsableLocalStorage=this._useCollapsableLocalStorage;$(document).on("dblclick","."+e._eventClassId+" a",function(){var expander=$(this).parent().children(".aio-expander");if(expander.is(":visible")){expander.click()}});$(document).on("click","."+e._eventClassId+" .aio-expander",function(){var isOpen=$(this).hasClass("aio-open"),removeClass=isOpen?"aio-open":"aio-close",addClass=isOpen?"aio-close":"aio-open",status=addClass=="aio-open"?"1":"0";$(this).removeClass(removeClass).addClass(addClass);$(this).parent().removeClass(removeClass).addClass(addClass);var aLink=$(this).parent().children("a");if(typeof e.options.others.onExpand==="function"){e.options.others.onExpand.bind(e.element)(status,$(this).parent().children("a"))}if(_useCollapsableLocalStorage&&e._hasAttr("data-aio-id",aLink)){var id=aLink.attr("data-aio-id");window.localStorage.setItem("AIO"+e._id+"-expand-"+id,status)}})},ContainerHandler.prototype._updateCollapsableNodes=function(e){if(this._usedCollapsable!==true){return false}var expander,treeClass,treeStatus,aLink,id,_useCollapsableLocalStorage=this._useCollapsableLocalStorage;e._nodes.find(".aio-expander").remove();e._nodes.find("li").each(function(){if($(this).children("ul").children("li").size()>0){treeStatus=undefined;treeClass="aio-close";aLink=$(this).children("a");if(_useCollapsableLocalStorage&&e._hasAttr("data-aio-id",aLink)){id=aLink.attr("data-aio-id");treeStatus=window.localStorage.getItem("AIO"+e._id+"-expand-"+id);if(treeStatus=="1"){treeClass="aio-open"}else if(treeStatus=="0"){treeStatus="aio-close"}}if(!e._defined(treeStatus)){treeClass="aio-"+e.options.container.collapsableDefaultStatus}$(this).addClass(treeClass);expander=$('<div class="aio-expander '+treeClass+'"><i class="fa fa-minus-square-o"></i><i class="fa fa-plus-square-o"></i></div>').appendTo($(this))}});return true},ContainerHandler.prototype._doResizable=function(e){var touchable=e._isTouch(),cOptions=e.options.container,saveWidth=function(){var saveWidth=e.element.width();if(saveWidth<e.options.container.resizeMin){saveWidth=e.options.container.resizeMin}return saveWidth>e.options.container.resizeMax?e.options.container.resizeMax:saveWidth};var resizeButton=$('<div class="aio-split-resize"></div>').prependTo(e.element.children(".aio-wrap"));if(!(!e._generatedId&&e.options.container.isResizable&&(e._localStorage||e.options.container.resizeLocalStorage==false))||!cOptions.resizeTouch&&touchable.touch){resizeButton.addClass("aio-hide")}var lWidth=0;if(cOptions.resizeLocalStorage&&e._localStorage){lWidth=window.localStorage.getItem("AIO"+e._id+"-width");if(!e._defined(lWidth)){lWidth=cOptions.defaultWidth}}if(lWidth<cOptions.resizeMin){lWidth=cOptions.resizeMin}var oppositeHandler=null;if(typeof cOptions.onResizeOpposite==="function"){oppositeHandler=cOptions.onResizeOpposite}else{var opposite=e._parseElements(cOptions.resizeOpposite);if(!resizeButton.hasClass("aio-hide")){if(!e._defined(opposite)||opposite.size()==0){throw"If you want to resize the container, you need an opposite site! (options.container.resizeOpposite)"}opposite=opposite.first();this._usedOpposite=opposite;var guid=e._idGenerate(opposite);oppositeHandler=function(width){if(cOptions.resizeOppositeMin>0&&opposite.width()<cOptions.resizeOppositeMin+1)return false;try{e._injectStyle("opposite","#"+guid+"{width: -webkit-calc(100% - "+width+"px) !important;width: -moz-calc(100% - "+width+"px) !important;width: calc(100% - "+width+"px) !important;}")}catch(e){return false}}}else{oppositeHandler=function(){}}}if(oppositeHandler===null){throw"There is no opposite handler!"}var resizeX=0,container=e.element;var resizeHandler=typeof cOptions.customResizeHandler==="function"?cOptions.customResizeHandler:function(ev){ev.preventDefault();var min=cOptions.resizeMin,max=cOptions.resizeMax,x=ev.pageX-container.offset().left;if(x>=min&&x<=max){resizeX=x;if(oppositeHandler(resizeX)!==false){container.css("width",resizeX+"px");if(container.data("sticky")){container.parent().css("width",resizeX+"px")}}}};resizeHandler=resizeHandler.bind(e.element);oppositeHandler=oppositeHandler.bind(e.element);var currentlyResizing=false;resizeButton.on(touchable.down,function(ev){ev.preventDefault();$(document).on(touchable.move,resizeHandler);currentlyResizing=true});$(document).on(touchable.up,function(ev){ev.preventDefault();$(document).unbind(touchable.move,resizeHandler);if(currentlyResizing){if(cOptions.resizeLocalStorage&&e._localStorage){window.localStorage.setItem("AIO"+e._id+"-width",saveWidth())}if(typeof cOptions.onResizeFinished==="function"){cOptions.onResizeFinished.bind(e.element)(e.element.width())}}currentlyResizing=false});var initHandler=typeof cOptions.onResizeInit==="function"?cOptions.onResizeInit:function(width){container.css("width",width+"px")};initHandler=initHandler.bind(e.element);if(oppositeHandler(lWidth)!==false){initHandler(lWidth)}resizeButton.show()};var MovementHandler=function(e){this.currentState=true;this.currentStateText="enable";this.init(e)};MovementHandler.prototype.init=function(e){this._doDraggable(e.options.movement,e);this._doDroppable(e.options.movement,e)};MovementHandler.prototype.reinit=function(e){this._doDraggable(e.options.movement,e);this._doDroppable(e.options.movement,e)};MovementHandler.prototype.state=function(e,state){this.currentState=state;this.currentStateText=state?"enable":"disable";this.reinit(e)};MovementHandler.prototype._doDraggable=function(movement,e){var onGetLabel=typeof movement.onGetLabel==="function"?movement.onGetLabel:this.draggableLabel,onGetHelper=typeof movement.onGetHelper==="function"?movement.onGetHelper:this.draggableHelper;onGetLabel=onGetLabel.bind(e.element);onGetHelper=onGetHelper.bind(e.element);var draggableSettings={revert:"invalid",appendTo:"body",cursorAt:{top:0,left:0},distance:10,scrollSensitivity:50,scrollSpeed:50,refreshPositions:true,helper:function(){var label=onGetLabel(this,arguments);return onGetHelper(label,this,arguments)},start:function(event){e._standardList.addClass("aio-currently-dragging");jQuery(document.activeElement).blur()},stop:function(){e._standardList.removeClass("aio-currently-dragging")}};$.extend(draggableSettings,movement.draggableSettings);$(movement.selector).draggable(draggableSettings).draggable(this.currentStateText)};MovementHandler.prototype._doDroppable=function(movement,e){e._standardList.find("a").droppable($.extend({activeClass:"ui-state-default",hoverClass:"ui-state-hover",tolerance:"pointer"},movement.droppableSettings)).droppable(this.currentStateText)};MovementHandler.prototype.draggableLabel=function(){return'<i class="fa fa-arrow-right" style="margin-right:5px;"></i> Move'};MovementHandler.prototype.draggableHelper=function(draggableLabel){return $('<div class="aio-movement-helper">'+draggableLabel+"</div>")};var LoaderHandler=function(e){this.container=null;this.init(e)};LoaderHandler.prototype.init=function(e){this.container=$('<div class="aio-tree-loader"></div>').appendTo(e._toolbar)};LoaderHandler.prototype.fromArguments=function(args){if(args.length===0){return this.container.width()>0}var percentage;if(args.length===1){if(args[0]=="show"||args[0]==true){percentage=100}else if(args[0]=="hide"||args[1]==false){percentage=0}else{percentage=args[0]}}else if(args.length===2){percentage=args[0]/args[1]*100}this.change(percentage)};LoaderHandler.prototype.change=function(percentage){if(percentage>0){this.container.parents(".aio-tree").addClass("loading");this.container.css("width",percentage+"%")}else{this.container.parents(".aio-tree").removeClass("loading");this.container.css("width","0px")}};var ToolbarHandler=function(e){this.itemsContainer=null;this.widget=null;this._rearrangeInvokeSimulate=null;this.init(e)};ToolbarHandler.prototype.init=function(e){this.widget=e;this.itemsContainer=e._toolbar.find(".aio-toolbar-items");this._iterateButtons(e,function(button){this._doCreateLink(button,e)}.bind(this))};ToolbarHandler.prototype._doCreateLink=function(button,e){if(this.itemsContainer.find('a[data-aio-name="'+button.name+'"]').size()>0){return}var classes=typeof button.cssClasses==="string"?button.cssClasses:"";classes=classes+(typeof button.usePredefinedFunction=="string"?" aio-predefined-"+button.usePredefinedFunction:"");var labelBack=button.labelBack||e.options.toolbarButtons.labelBack;var visibleInActiveFolderType=typeof button.visibleInActiveFolderType==="object"&&button.visibleInActiveFolderType.length>0?button.visibleInActiveFolderType.join(";"):":",hasPreDisableFunction=typeof button.onPreDisable==="function"?"toolbar":"",html='<a href="#" class="'+classes+' aio-tooltip" style="display:none;" data-aio-predisable="'+hasPreDisableFunction+'" data-aio-name="'+button.name+'" data-aio-allowed="'+visibleInActiveFolderType+'" data-aio-name="'+button.name+'" data-aio-tooltip-title="'+(typeof button.toolTipTitle!=="undefined"?button.toolTipTitle:"")+'" data-aio-tooltip-text-disabled="'+(typeof button.toolTipTextDisabledLink!=="undefined"?button.toolTipTextDisabledLink:"")+'" data-aio-tooltip-text="'+(typeof button.toolTipText!=="undefined"?button.toolTipText:"")+'">'+button.content+'<span class="aio-toolbar-back">'+labelBack+"</span></a>",link=$(html).appendTo(this.itemsContainer),usePredefinedFunction=typeof button.usePredefinedFunction=="string"&&typeof this["_doPredefined"+button.usePredefinedFunction]==="function",usePredefinedInitFunction=usePredefinedFunction&&typeof this["_doPredefinedInit"+button.usePredefinedFunction]==="function";button.element=link;link.data("aio-link",button);if(usePredefinedInitFunction){this["_doPredefinedInit"+button.usePredefinedFunction](e,$(this),button)}var that=this;link.click(function(event){var active=e.active(),isCancelActive=$(this).hasClass("isCancelActive"),isCreateNew=active.size()>0&&active.attr("data-aio-id")=="AIO_NEW_TO_CREATE",setToActive=false;if(typeof button.onAllowed==="function"&&!isCancelActive){var result=button.onAllowed.bind(e.element)(e,$(this));if(result===false){event.preventDefault();return false}}if($(this).hasClass("aio-disable-link")&&!isCreateNew){event.preventDefault();return false}if(isCreateNew){if(isCancelActive){e.element.removeClass("aio-prepare-create-new");var _activeBeforeCreateForm=e._typesHandler._activeBeforeCreateForm;if(_activeBeforeCreateForm!=null&&typeof _activeBeforeCreateForm==="object"){setToActive=_activeBeforeCreateForm}e._typesHandler._activeBeforeCreateForm=null}else{e.element.addClass("aio-prepare-create-new")}}if(usePredefinedFunction){that["_doPredefined"+button.usePredefinedFunction](e,$(this),isCancelActive,button);e._typesHandler.state(isCancelActive)}if(typeof button.onCancel==="function"){if(isCancelActive){that.itemsContainer.add($(this)).removeClass("isCancelActive");button.onCancel.bind(e.element)($(this))}else{that.itemsContainer.add($(this)).addClass("isCancelActive")}e._typesHandler.state(isCancelActive)}if(typeof button.onClick==="function"&&!isCancelActive){button.onClick.bind(e.element)(e,$(this))}if(e._defined(setToActive)){e.active(setToActive)}event.preventDefault();return false})};ToolbarHandler.prototype._doPredefinedInitrename=function(e,obj,button){$(document).on("keydown","."+e._eventClassId+" a",function(event){if(event.which==113){button.element.click();return false}})};ToolbarHandler.prototype._doPredefinedInitrearrange=function(e,obj,button){if(!e.options.container.doNotUseSaveInRearrange){return}var that=this;$(document).on("dragstart","."+e._eventClassId+" a[data-aio-id]",function(ev){if(!$(this).parents(".aio-tree").hasClass("aio-rearrange")){that._rearrangeInvokeSimulate=[$(this),ev];e.toolbarButton("rearrange");ev.preventDefault();return false}})};ToolbarHandler.prototype._doPredefinedrename=function(e,obj,isCancelActive,button){var a=e.active(),args=arguments,name=a.find(".aio-node-name"),input,submitButton,isCreateNew=a.size()>0&&a.attr("data-aio-id")=="AIO_NEW_TO_CREATE",onClose=function(){this._doPredefinedrename.apply(this,args)}.bind(this),onSave=function(){var newName=input.val(),callbackOnSave=isCreateNew?e.options.others.onCreateFolder:button.onSave;if(typeof callbackOnSave==="function"){callbackOnSave=callbackOnSave.bind(e.element);if(isCreateNew){callbackOnSave(newName,a.data("createType"),a.data("createToParent"),a)}else{callbackOnSave(a.attr("data-aio-id"),newName)}}else{throw"If you want to use the rename/create function please define an onSave/onCreateFolder action!"}}.bind(e);if(name.css("visibility")!=="hidden"){name.css("visibility","hidden");e.nodes(false);this.itemsContainer.add(obj).addClass("isCancelActive");input=$('<input type="text"/>').insertAfter(a);submitButton=$('<button class="aio-rename-submit">'+e.options.others.labelRenameSave+"</button>").insertAfter(input);input.val(name.html()).focus();input.keypress(function(e){if(e.which==13){onSave()}}).keyup(function(e){if(e.which==27){onClose()}});submitButton.on("click",function(e){onSave();e.preventDefault();return false})}else{name.css("visibility","visible");e.nodes(true);this.itemsContainer.add(obj).removeClass("isCancelActive");a.parent().children("input,button.aio-rename-submit").remove()}};ToolbarHandler.prototype._doPredefinedrearrange=function(e,obj,isCancelActive){if(typeof $.fn.nestedSortable==="function"){var nodesUL=e._nodes.children("ul"),saveButton=e.element.find(".aio-rearrange-save"),onRearrangeSave=e.options.container.onRearrangeSave,onRearrangeCancel=e.options.container.onRearrangeCancel;if(isCancelActive){if(obj){this.itemsContainer.add(obj).removeClass("isCancelActive")}e._standardList.children("a").attr("disabled",false);e._standardList.children(".aio-search").attr("disabled",false);e.element.removeClass("aio-rearrange");nodesUL.nestedSortable("destroy");nodesUL.data("nestedSortable",false);saveButton.stop().hide();if(!e.options.container.doNotUseSaveInRearrange){var nodesHTML=nodesUL.data("nodesHTML");nodesUL.html(nodesHTML)}e.nodes(true);e.movement(true);if(typeof onRearrangeCancel==="function"){onRearrangeCancel.bind(e.element)(e,event)}}else{e.element.addClass("aio-rearrange");if(obj){this.itemsContainer.add(obj).addClass("isCancelActive")}e._standardList.children("a").attr("disabled","disabled");e._standardList.children(".aio-search").attr("disabled","disabled");nodesUL.data("nodesHTML",nodesUL.html());if(!e.options.container.doNotUseSaveInRearrange){if(saveButton.size()<=0){saveButton=$('<button class="aio-rearrange-save button button-primary" style="display:none;">'+e.options.others.labelRearrangeSave+"</button>").insertAfter(e._toolbar);var that=this;saveButton.click(function(event){if(typeof onRearrangeSave==="function"){onRearrangeSave.bind(e.element)(that._doPredefinedrearrangeParse(e,nodesUL),nodesUL.html(),$(this),event)}event.preventDefault();return false})}saveButton.show()}e.movement(false);e.nodes(false);this._doPredefinedrearrangeActivate(nodesUL,e);nodesUL.data("nestedSortable",true)}}else{throw"Please include nestedSortable jQuery plugin (https://github.com/ilikenwf/nestedSortable)"}};ToolbarHandler.prototype._doPredefinedrearrangeActivate=function(nodesUL,e){try{nodesUL.nestedSortable("destroy")}catch(e){}var hoverListTimeout,hoverListElement,ri=this._rearrangeInvokeSimulate,appendTo=nodesUL.scrollParent();appendTo=appendTo.is(document)?"parent":appendTo;nodesUL.nestedSortable($.extend({handle:"a[data-aio-href]",items:"li",listType:"ul",tolerance:"intersect",toleranceElement:"> a",helper:"clone",forceHelperSize:false,forcePlaceholderSize:true,doNotClear:true,hoverListElement:function(event,ui){var _hoverListElement=event.hoverListElement;if(!_hoverListElement.is(hoverListElement)){hoverListElement=_hoverListElement;clearTimeout(hoverListTimeout);var _expander=_hoverListElement.children(".aio-expander");if(_expander.size()===1&&!_expander.hasClass("aio-open")){hoverListTimeout=setTimeout(function(){_expander.click();setTimeout(function(){nodesUL.nestedSortable("refreshPositions")},50)},700)}}},noHoverListElement:function(){clearTimeout(hoverListTimeout);hoverListElement=null},sort:function(event,ui){if(!ui.helper.data("refreshPositions")){nodesUL.nestedSortable("refreshPositions");ui.helper.data("refreshPositions",true)}},start:function(event,ui){if(e.options.container.doNotUseSaveInRearrange){ui.item.data("oldNodesHTML",nodesUL.data("nodesHTML"))}},relocate:function(event,ui){e.reinit("tree");var args=$.makeArray(arguments),doNotUseSaveInRearrange=e.options.container.doNotUseSaveInRearrange,onRearrangeRelocate=e.options.container.onRearrangeRelocate;if(doNotUseSaveInRearrange){if(typeof onRearrangeRelocate!=="function"){throw"Please define the onRearrangeRelocate function in the options!"}var deferred=$.Deferred(),active=ui.item,nextToActive=active.next(),prevToActive=active.prev(),nextId=nextToActive.is("li")?nextToActive.children("a").attr("data-aio-id"):false,prevId=prevToActive.is("li")?prevToActive.children("a").attr("data-aio-id"):false,totalNext,totalPrev,totalNextId,totalPrevId,iIndex=-1,currentInAll,allNodes=e._nodes.find("a[data-aio-id]"),oldNodesHTML=active.data("oldNodesHTML"),id=active.children("a").attr("data-aio-id"),parentsA=active.parent().parent().children("a[data-aio-id]"),parentsID=parentsA.size()>0?parentsA.attr("data-aio-id"):e.options.others.rootParentId;e.loader(true);allNodes.each(function(){iIndex++;if($(this).attr("data-aio-id")===id){return false}});totalNext=allNodes.eq(iIndex+1);totalNextId=totalNext.is("a")?totalNext.attr("data-aio-id"):false;if(iIndex-1>=0){totalPrev=allNodes.eq(iIndex-1);totalPrevId=totalPrev.is("a")?totalPrev.attr("data-aio-id"):false}else{totalPrevId=false}onRearrangeRelocate.apply(e.element,[id,parentsID,deferred,prevId,nextId,totalPrevId,totalNextId,args]);deferred.then(function(){}.bind(this),function(){e.nodesHTML(oldNodesHTML)}.bind(this)).always(function(){e.loader(false)}.bind(this))}},isAllowed:function(placeholder,placeholderParent,currentItem){if(e.loader()){return false}var classNameRestrict="aio-restrict-hierarchical-change",result=true;if(currentItem.parents("."+classNameRestrict).size()>0){var id=currentItem.attr("id");if(placeholder.parent().children("#"+id).size()===0){result=false}}if(placeholder.parents("."+classNameRestrict).size()>0){result=false}return result},stop:function(){if(ri){e.toolbarButton("rearrange")}this._rearrangeInvokeSimulate=null}.bind(this)},e.options.container.nestedSortableSettings));if(ri&&dispatchEvent){var handle=ri[0][0],rie=ri[1],x=rie.clientX,y=rie.clientY;this._dispatchEvent(handle,"mousedown",this._createRearrangeEvent("mousedown",handle,{clientX:x,clientY:y}));this._dispatchEvent(document,"mousemove",this._createRearrangeEvent("mousemove",document,{clientX:x+1,clientY:y+1}))}};ToolbarHandler.prototype._dispatchEvent=function(el,type,evt){if(el.dispatchEvent){el.dispatchEvent(evt)}else if(el.fireEvent){el.fireEvent("on"+type,evt)}return evt};ToolbarHandler.prototype._createRearrangeEvent=function(type,target,options){var evt;var e=$.extend({target:target,preventDefault:function(){},stopImmediatePropagation:function(){},stopPropagation:function(){},isPropagationStopped:function(){return true},isImmediatePropagationStopped:function(){return true},isDefaultPrevented:function(){return true},bubbles:true,cancelable:type!="mousemove",view:window,detail:0,screenX:0,screenY:0,clientX:0,clientY:0,ctrlKey:false,altKey:false,shiftKey:false,metaKey:false,button:0,relatedTarget:undefined},options||{});if($.isFunction(document.createEvent)){evt=document.createEvent("MouseEvents");evt.initMouseEvent(type,e.bubbles,e.cancelable,e.view,e.detail,e.screenX,e.screenY,e.clientX,e.clientY,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,e.button,e.relatedTarget||document.body.parentNode)}else if(document.createEventObject){evt=document.createEventObject();$.extend(evt,e);evt.button={0:1,1:4,2:2}[evt.button]||evt.button}return evt};ToolbarHandler.prototype._doPredefinedrearrangeParse=function(e,obj){var arraied=obj.nestedSortable("toArray",{startDepthCount:0,onGetId:function(obj,depth,_left,o){var id=obj.children("a").attr("data-aio-id");return id}});arraied.shift();var raw=[];if(typeof arraied==="object"&&arraied.length>1){$.each(arraied,function(k,v){if(v.parent_id==null){v.parent_id=e.options.others.rootParentId}raw.push({fid:v.id,pid:v.parent_id})})}return{raw:arraied,parsed:raw}};ToolbarHandler.prototype._iterateButtons=function(e,callback){var buttons=e.options.toolbarButtons.items;if(typeof buttons==="object"||buttons.length>0){var button,name;for(var i=0;i<buttons.length;i++){button=buttons[i];name=button.name;if(!e._defined(name)){console.error("Toolbar button must have a name.");continue}if(callback(button,e)===false){break}}}};var TypesHandler=function(e){this._linkContainer=false;this._animationTimeout=undefined;this._activeBeforeCreateForm=null;this.init(e)};TypesHandler.prototype.init=function(e){this._iterateCreateTypes(e,function(target){this._doCreateLink(target,e)}.bind(this));if(this._linkContainer!=false){var html='<a href="javascript:void();" class="'+e.options.createCancel.cssClasses+' aio-cancel-create-new">'+e.options.createCancel.label+"</a>";var link=$(html).appendTo(this._linkContainer);link.click(function(event){e.toolbarButton("rename");e._nodes.find(".aio-create-new").parent().remove();if(typeof e.options.others.onTypeButtonClicked==="function"){e.options.others.onTypeButtonClicked.bind(e.element)(link,event)}event.preventDefault();return false})}};TypesHandler.prototype.state=function(state){if(typeof this._linkContainer==="object"){if(state){this._linkContainer.removeClass("aio-disable-all")}else{this._linkContainer.addClass("aio-disable-all")}}};TypesHandler.prototype._doCreateLink=function(target,e){var linkContainer=e.element.find(".aio-tree-headline");this._linkContainer=linkContainer;if(linkContainer.find('a[data-aio-name="'+target.name+'"]').size()>0){return}var classes=typeof target.cssClasses==="string"?target.cssClasses:"",visibleInActiveFolderType=typeof target.visibleInActiveFolderType==="object"&&target.visibleInActiveFolderType.length>0?target.visibleInActiveFolderType.join(";"):":",hasPreDisableFunction=typeof target.onPreDisable==="function"?"type":"",html='<a href="#" class="'+classes+' aio-tooltip" style="display:none;" data-aio-name="'+target.name+'" data-aio-predisable="'+hasPreDisableFunction+'" data-aio-allowed="'+visibleInActiveFolderType+'" data-aio-tooltip-title="'+(typeof target.toolTipTitle!=="undefined"?target.toolTipTitle:"")+'" data-aio-tooltip-text="'+(typeof target.toolTipText!=="undefined"?target.toolTipText:"")+'">'+target.label+"</a>",link=$(html).appendTo(linkContainer);link.data("createType",target);link.click(function(event){if($(this).hasClass("aio-disable-link")){event.preventDefault();return false}this._doCreateForm($(this),e,target);if(typeof e.options.others.onTypeButtonClicked==="function"){e.options.others.onTypeButtonClicked.bind(e.element)(link,event)}event.preventDefault();return false}.bind(this));link.data("aio-link",target)};TypesHandler.prototype._doCreateForm=function(obj,e,target){var active=e.active(),parentUL,parentID=e.options.others.rootParentId;if(active.size()<=0||active.parents(".aio-nodes").size()<=0){parentUL=e._nodes.children("ul")}else{parentUL=active.parent().children("ul");parentID=active.attr("data-aio-id");var expander=active.parent().children(".aio-expander");if(expander.size()>0){if(expander.hasClass("aio-close")){expander.click()}}else{active.parent().addClass("aio-open")}}if(active.size()>0){this._activeBeforeCreateForm=active}var li=$('<li>            <a href="javascript:void(0)" class="aio-create-new" data-aio-type="" data-aio-id="AIO_NEW_TO_CREATE" data-aio-href="">        \t\t'+target.icon+'        \t\t<div class="aio-node-name"></div>        \t\t<span class="aio-cnt aio-cnt-0">0</span>        \t</a>        \t<ul></ul>        </li>').appendTo(parentUL);li.children("a").data("createType",target);li.children("a").data("createToParent",parentID);e.active("AIO_NEW_TO_CREATE");e.toolbarButton("rename")};TypesHandler.prototype._iterateCreateTypes=function(e,callback){var createTypes=e.options.createTypes;if(typeof createTypes==="object"||createTypes.length>0){var type,name;for(var i=0;i<createTypes.length;i++){type=createTypes[i];name=type.name;if(!e._defined(name)){console.error("Create type must have a name.");continue}callback(type,e)}}};TypesHandler.prototype._doSwitchFolder=function(e,obj,animationDuration){var allowed,objType=obj.attr("data-aio-type"),show,preDisable,animationArr={show:[],hide:[]};if(!animationDuration){animationDuration=300}var items=typeof this._linkContainer==="object"?this._linkContainer.find("a"):false,toolbarItems=e._toolbar.find(".aio-toolbar-items").find("a");items=toolbarItems.add(items);items.each(function(){if($(this).hasClass("aio-cancel-create-new")){return true}if((preDisable=$(this).attr("data-aio-predisable")).length>0){(preDisable==="toolbar"?e._toolbarHandler._iterateButtons:e._typesHandler._iterateCreateTypes)(e,function(button){if($(this).attr("data-aio-name")===button.name&&typeof button.onPreDisable==="function"){show=button.onPreDisable.bind(e.element)(button)}}.bind(this))}else{allowed=$(this).attr("data-aio-allowed");allowed=allowed===":"?[]:allowed.split(";");show=false;if(allowed.length>0){if(allowed.indexOf(objType)>-1){show=true}}else{show=true}}animationArr[show?"show":"hide"].push($(this))});var currentItem;var showFn=function(){if(animationArr.show.length>0){for(var i=0;i<animationArr.show.length;i++){currentItem=animationArr.show[i].stop();if(currentItem.parent().hasClass("aio-toolbar-items")){currentItem.removeClass("aio-disable-link")}else{animationArr.show[i].stop().fadeIn(animationDuration).removeClass("aio-hidden")}}}e.reinit("tooltips")}.bind(this);if(animationArr.hide.length>0){for(var i=0;i<animationArr.hide.length;i++){currentItem=animationArr.hide[i].stop();if(currentItem.parent().hasClass("aio-toolbar-items")){currentItem.addClass("aio-disable-link")}else{currentItem.fadeOut(animationDuration).addClass("aio-hidden")}}if(e._defined(this._animationTimeout)){clearTimeout(this._animationTimeout)}this._animationTimeout=setTimeout(function(){showFn()}.bind(this),animationDuration>0?animationDuration+50:0)}else{showFn()}};var SearchHandler=function(e){this._fixRestoreContent=false;this._restoreContent=undefined;this._oldSelectedId=undefined;this._searchTimeout=undefined;this._noSearchResults=undefined;this._treeHeadline=undefined;this.init(e)};SearchHandler.prototype.init=function(e){var that=this;this._noSearchResults=$("."+e._eventClassId+" .aio-no-results");this._treeHeadline=$("."+e._eventClassId+" .aio-tree-headline");$("."+e._eventClassId+" .aio-search input").on("propertychange input",function(event){if(event.type==="propertychange"&&event.originalEvent.propertyName==="value"||event.type!=="propertychange"){that._doSearch(e,$(this),event.target.value.toLowerCase())}});$(document).on("click","."+e._eventClassId+" .aio-search .fa-close",function(event){$(this).parent().children("input").val("").trigger("input")});$(document).on("click","."+e._eventClassId+" .aio-search",function(event){if(!$(event.target).is("input")&&!$(event.target).hasClass("fa-close")){$(this).children("input").focus()}});$(document).on("focus","."+e._eventClassId+" .aio-search input",function(event){$(this).parent().addClass("aio-search-focus")});$(document).on("blur","."+e._eventClassId+" .aio-search input",function(event){$(this).parent().removeClass("aio-search-focus");e._nodes.find(".aio-search-selected").removeClass("aio-search-selected");that._fixRestoreContent=!!$(this).val()});$(document).on("keydown","."+e._eventClassId+" .aio-search input",function(event){var selected=e._nodes.find(".aio-search-selected");if((event.which===40||event.which===38)&&!!$(this).val()){var nextSelected,sfn=event.which===38?"prev":"next";if(selected.size()>0){nextSelected=selected.parent()[sfn]().children("a");selected.removeClass("aio-search-selected")}else{sfn=event.which===38?"last":"first";nextSelected=e._nodes.find("a[data-aio-id]:"+sfn)}nextSelected.addClass("aio-search-selected");if(nextSelected.size()>0){e.nodeToViewPort(nextSelected)}event.preventDefault();return false}else if(event.which===13&&selected.size()>0){selected[0].click()}else if(event.which===27){$(this).parent().children(".fa-close").click();event.preventDefault();return false}return true;
})};SearchHandler.prototype._doRestoreContent=function(e){if(!this._restoreContent){return}var restoredContent=this._restoreContent.wrap("<p/>").parent();var newSelectedId=e.active().attr("data-aio-id");if(this._oldSelectedId===undefined||newSelectedId==this._oldSelectedId){newSelectedId=false}e._nodes.html(restoredContent.html()).css("min-height","");e.element.removeClass("aio-searching");this._restoreContent=undefined;this._oldSelectedId=undefined;this._noSearchResults.hide();this._treeHeadline.removeClass("aio-disable-all");e.reinit();e.active(newSelectedId,true,true)};SearchHandler.prototype._doFixRestoreContent=function(e,isSearch){e._nodes.find(".aio-search-selected").removeClass("aio-search-selected");if(this._fixRestoreContent&&this._restoreContent){var that=this;e._nodes.find("a[data-aio-id]").each(function(){that._restoreContent.find('a[data-aio-id="'+$(this).attr("data-aio-id")+'"]').replaceWith($(this).clone().wrap("<p/>").parent().html())})}this._fixRestoreContent=false};SearchHandler.prototype._doSearch=function(e,searchField,value){var icons=searchField.parent().children("i"),showCloseIcon=+value.length,isSearch=value.length>0;icons.eq(showCloseIcon).show();icons.eq(+!showCloseIcon).hide();this._doFixRestoreContent(e,isSearch);if(isSearch){if(this._restoreContent===undefined){this._restoreContent=$(e._nodes.html());this._oldSelectedId=e.active().attr("data-aio-id");e._nodes.css("min-height",e._nodes.height())}this._treeHeadline.addClass("aio-disable-all");e._nodes.html("");e.element.addClass("aio-searching");clearTimeout(this._searchTimeout);this._searchTimeout=setTimeout(function(){if(!searchField.val()){this._doRestoreContent(e);return}var results=[];this._restoreContent.find("a[data-aio-id] .aio-node-name").slice(0,20).each(function(){if($(this).html().toLowerCase().indexOf(value)>-1){results.push("<li>"+$(this).parent().clone().wrap("<p/>").parent().html()+"</li>")}});e._nodes.html("<ul>"+results.join("")+"</ul>");if(results.length>0){this._noSearchResults.hide()}else{this._noSearchResults.show()}e.reinit()}.bind(this),value.length>1?500:0)}else{this._doRestoreContent(e)}};var AIOTree={_id:"",_eventClassId:"",_generatedId:false,_localStorage:false,_movementHandler:null,_typesHandler:null,_containerHandler:null,_loaderHandler:null,_toolbarHandler:null,_searchHandler:null,_standardList:null,_nodes:null,_toolbar:null,options:{container:{isCollapsable:true,isResizable:true,isSticky:true,theme:"",collapsableLocalstorage:true,collapsableDefaultStatus:"open",defaultWidth:250,resizeOpposite:null,customResizeHandler:false,onResizeOpposite:false,onResizeInit:false,onResizeFinished:false,resizeTouch:false,resizeLocalStorage:true,resizeMin:250,resizeMax:800,resizeOppositeMin:200,onRearrangeCancel:false,onRearrangeRelocate:false,onRearrangeSave:false,doNotUseSaveInRearrange:false,onDoTooltips:false,tooltipsterSettings:{},nestedSortableSettings:{},hcStickySettings:{},customLoaderHandler:false},createTypes:[{name:"folder",icon:'<i class="fa fa-folder-open"></i><i class="fa fa-folder"></i>',visibleInActiveFolderType:false,onPreDisable:false,label:"New",cssClasses:false,toolTipTitle:"",toolTipText:""}],createCancel:{label:"Cancel",cssClasses:""},toolbarButtons:{items:[{name:"rename",content:'<i class="fa fa-pencil"></i>',visibleInActiveFolderType:false,usePredefinedFunction:"rename",toolTipTitle:"Rename",toolTipText:"Rename the current selected folder.",toolTipTextDisabledLink:"This link is disabled! Please select a folder."},{name:"rearrange",content:'<i class="fa fa-sort"></i>',cssClasses:false,visibleInActiveFolderType:false,onPreDisable:false,onClick:false,onCancel:false,onAllowed:false,usePredefinedFunction:"rearrange",toolTipTitle:"Rearrange",toolTipText:"Change the hierarchical order of the folders."}],labelBack:"Cancel"},movement:{customMovementHandler:false,selector:".aio-draggable-item",onDrop:false,onGetLabel:false,onGetHelper:false,draggableSettings:{},droppableSettings:{}},extendedMode:{enabled:false,onCreateTemplate:false},others:{rootParentId:-1,labelRenameSave:"OK",labelRearrangeSave:"Save new order",onExpand:false,onAfterFinish:false,onSwitchFolder:false,onCreateFolder:false,onTypeButtonClicked:false}},nodesJSON:function(data,isLazyLoadingResponse){var newHTML="";this.nodesHTML(newHTML,isLazyLoadingResponse)},_onCreateTemplate:function(){},_create:function(){if(!this.element.hasClass("aio-tree")){throw"Add class .aio-tree to the item."}this._standardList=this.element.find(".aio-list-standard");if(this._standardList.size()!==1){throw"Please define one .aio-standard-list container"}this._nodes=this.element.find(".aio-list-standard .aio-nodes");if(this._standardList.size()!==1){throw"Please define one .aio-list-standard > .aio-nodes container"}this._toolbar=this.element.find(".aio-toolbar");if(this._toolbar.size()!==1){throw"Please define one .aio-toolbar container. If you want to hide the toolbar, create one and hide it with display:none;."}if(typeof $.fn.draggable!=="function"||typeof $.fn.sortable!=="function"){throw"Please include jQuery UI with draggable and sortable support (https://jqueryui.com/)."}this._eventClassId=this._guid();this.element.addClass("aio-tree-instance "+this._eventClassId);var theme=this.options.container.theme,themeClass=[];if(this._defined(theme)&&theme.length>0){var themeSplit=theme.split(" ");for(var i=0;i<themeSplit.length;i++){themeClass.push("aio-theme-"+themeSplit[i])}this.element.addClass(themeClass.join(" "))}else{this.element.addClass("aio-theme-default")}this._idGenerate();this._testLocalStorage();this._containerHandler=new ContainerHandler(this);this._searchHandler=new SearchHandler(this);this._typesHandler=new TypesHandler(this);if(typeof this.options.movement.customMovementHandler==="object"){this._movementHandler=new this.options.customMovementHandler(this,MovementHandler)}else{this._movementHandler=new MovementHandler(this)}this._toolbarHandler=new ToolbarHandler(this);if(typeof this.options.container.customLoaderHandler==="object"){this._loaderHandler=new this.options.container.customLoaderHandler(this)}else{this._loaderHandler=new LoaderHandler(this)}var activeFolder=this.active();if(activeFolder.size()>0){this._typesHandler._doSwitchFolder(this,activeFolder,0)}this._containerHandler._doTooltips(this);setTimeout(function(){this.element.removeClass("aio-tree-fade")}.bind(this),50);if(typeof this.options.others.onAfterFinish==="function"){this.options.others.onAfterFinish.bind(this.element)()}this._containerHandler.sticky(this);this.element.data("allInOneTree",true);this._checkFolderContent();if(this.element.hasClass("aio-lazy")){this.loader(true)}},reinit:function(type){var allowAll=arguments.length==0,types=allowAll?["movement","tooltips","tree","rearrange"]:type.split(" ");if(types.indexOf("movement")>-1){this._movementHandler.reinit(this)}if(types.indexOf("tooltips")>-1){this._containerHandler._doTooltips(this)}if(types.indexOf("tree")>-1){this._containerHandler._updateCollapsableNodes(this)}if(types.indexOf("rearrange")>-1){var nodesUL=this._nodes.children("ul");if(nodesUL.data("nestedSortable")){this._toolbarHandler._doPredefinedrearrange(this,undefined,false)}}this._containerHandler.sticky(this);this._checkFolderContent();this.nodes(this._nodesLastEnabled)},movement:function(state){this._movementHandler.state(this,state)},nodeToViewPort:function($object){if(jQuery.fn.scrollParent){var win=$object.scrollParent(),scroller=win.is(document)?$("html,body"):win;win=win.is(document)?$(window):win;var winScrollTop=win.scrollTop(),fixedHeader=this.element.find(".aio-reached-overflow"),fixedHeaderTop=parseInt(fixedHeader.css("top")||0),fixedHeaderHeight=+fixedHeader.outerHeight()+fixedHeaderTop,scrollPosition=winScrollTop+fixedHeaderHeight,visibleArea=winScrollTop+win.height(),objEndPos=$object.offset().top+$object.outerHeight(),directionDown=scrollPosition<=objEndPos,directionUp=visibleArea>=objEndPos,inViewPort=directionDown&&directionUp;if(!inViewPort){var additional=$object.outerHeight()*2;scroller.stop().animate({scrollTop:directionUp?winScrollTop-additional:winScrollTop+additional})}}else{console.warn("jQuery UI is not available (jQuery.scrollParent)")}},toolbarButton:function(name){if(name==="cancel"){var isCancelActive=this._toolbar.find("a.isCancelActive");if(isCancelActive.size()===1){this.toolbarButton(isCancelActive.attr("data-aio-name"))}}else{this._toolbarHandler._iterateButtons(this,function(button){if(button.name===name){if(typeof button.element==="object"){button.element.click()}return false}}.bind(this))}},active:function(id,avoidOnSwitchEvent,reveal){var active=this._standardList.find("a.active");if(typeof id!=="undefined"){var newActive;if(typeof id==="object"){newActive=id}else{newActive=this.byId(id)}if(typeof newActive==="object"&&newActive.size()>0){active.removeClass("active");newActive.addClass("active");if(reveal){var parentable=newActive,closeable;while((closeable=parentable.parents("li.aio-close")).size()>0){closeable.children(".aio-expander").click()}}this._typesHandler._doSwitchFolder(this,newActive);if(typeof this.options.others.onSwitchFolder==="function"&&avoidOnSwitchEvent!==true){return this.options.others.onSwitchFolder.bind(this.element)(newActive,typeof active==="object"?active.attr("data-aio-id"):undefined)}return true}else{return false}}else{return active}},loader:function(){return this._loaderHandler.fromArguments(arguments)},_nodesLastEnabled:true,nodes:function(enabled){this._nodesLastEnabled=enabled;this._standardList.find("a").each(function(){if(enabled){$(this).attr("href",$(this).attr("data-aio-href")).removeClass("aio-disable-link")}else{$(this).attr("data-aio-href",$(this).attr("href")).addClass("aio-disable-link");$(this).attr("href","javascript:void(0)")}})},nodesHTML:function(newHTML,isLazyLoadingResponse){var nodesUL=this._nodes.children("ul");if(nodesUL.size()===0){throw"There is no <ul></ul> available in the .aio-nodes container!"}var fLazy=function(){var active=this.active();if(active.size()>0&&isLazyLoadingResponse){this.element.removeClass("aio-lazy");this.loader(false);this.active(active.attr("data-aio-id"),true)}}.bind(this);if(newHTML){nodesUL.data("nodesHTML",newHTML);nodesUL.html(newHTML);this.reinit();fLazy()}else{fLazy();return nodesUL.html()}},counts:function(arr){if(typeof arr==="object"){var folder;$.each(arr,function(key,value){folder=this.byId(key);if(folder!==false){folder.find(".aio-cnt").attr("class","aio-cnt aio-cnt-"+value).html(value)}}.bind(this))}},byId:function(id){if(typeof id!=="undefined"){return this._standardList.find('a[data-aio-id="'+id+'"]')}else{return false}},rename:function(element,newName){var obj;if(arguments.length==1){obj=this.active();newName=element}else if(arguments.length==2){obj=element instanceof jQuery?element:this.byId(element)}else{return false}if(obj instanceof jQuery){obj.children(".aio-node-name").html(newName);var input=obj.children("input");if(input.size()>0){input.val(newName)}return true}else{return false}},remove:function(element){var obj;if(arguments.length==1&&typeof element==="object"){obj=element instanceof jQuery?element:this.byId(element)}else{obj=this.active()}if(obj instanceof jQuery){var li=obj.parent(),parentOfLi=li.parent().parent(),nextActive=false,active=this.active(),activeID=active.attr("data-aio-id");if(active.size()>0&&activeID){if(active.is(obj)){if(parentOfLi.is("li")){nextActive=parentOfLi.children("a")}else{nextActive="firstNode"}}else if(parentOfLi.children("ul").find('a[data-aio-id="'+activeID+'"]').size()>0){nextActive="firstNode"}}li.remove();if(nextActive==="firstNode"){if(this._nodes.find("a").size()>0){nextActive=this._nodes.find("a:first")}else if(this._standardList.find("a").size()>0){nextActive=this._standardList.find("a:first")}}if(nextActive instanceof jQuery){this.active(nextActive)}this.reinit("tree");return true}else{return false}},serialize:function(){var nodesUL=this._nodes.children("ul"),th=this._toolbarHandler,alreadyNestedSortableActive;if(nodesUL.size()>0){alreadyNestedSortableActive=nodesUL.data("nestedSortable");if(!alreadyNestedSortableActive){th._doPredefinedrearrangeActivate(nodesUL,this)}var parsed=th._doPredefinedrearrangeParse(this,nodesUL);if(!alreadyNestedSortableActive){nodesUL.nestedSortable("destroy")}return parsed}else{return false}},breadcrumb:function(returnType){var active=this.active();if(active){var toTop=[],isStandard=!active.parents(".aio-nodes").size()>0;var iterateHierarchy=function(cb){while(active!==false){active=active.parent().parent().parent().children("a[data-aio-id]");if(active.size()>0){cb()}else{active=false}}};if(returnType==="objects"){var getFolderInfo=function(aTag){return{id:aTag.attr("data-aio-id"),type:aTag.attr("data-aio-type"),name:aTag.children(".aio-node-name").html(),obj:aTag,link:aTag.attr("href")}};toTop.push(getFolderInfo(active));if(!isStandard){iterateHierarchy(function(){toTop.push(getFolderInfo(active))})}toTop.reverse();return toTop}else{toTop.push(active.children(".aio-node-name").html());if(!isStandard){iterateHierarchy(function(){toTop.push(active.children(".aio-node-name").html())})}toTop.reverse();if(!returnType||returnType==="array"){if(!isStandard){toTop.unshift("/")}return toTop}if(returnType==="string"){var result=toTop.join("/");if(!isStandard){result="/"+result}return result}}}return""},_checkFolderContent:function(){if(this._nodes.find("li").size()>0){this.element.removeClass("aio-no-folders")}else{this.element.addClass("aio-no-folders")}},_testLocalStorage:function(){var test="test";try{window.localStorage.setItem(test,test);window.localStorage.removeItem(test);this._localStorage=true}catch(e){}},_idGenerate:function(item){var id;if(item instanceof jQuery){if(this._hasAttr("id",item)){return item.attr("id")}else{id=this._guid();item.attr("id",id);return id}}else{var e=this.element;if(this._hasAttr("id")){id=e.attr("id")}else{id=this._guid();e.attr("id",id);this._generatedId=true}this._id=id}},_hasAttr:function(name,obj){var e=obj instanceof jQuery?obj:this.element,attr=e.attr(name);return typeof attr!==typeof undefined&&attr!==false},_parseElements:function(obj,noJquery){if(typeof obj==="string"){return noJquery!==true?$(obj):obj}else if(typeof obj==="function"){return obj.bind(this.element)(jQuery)}else if(obj instanceof jQuery&&noJquery!==true){return obj}else{return undefined}},_defined:function(obj){return typeof obj!==typeof undefined&&obj!==false&&obj!==null},_isTouch:function(){var isTouch="ontouchstart"in window||window.navigator.maxTouchPoints;if(isTouch){return{touch:isTouch,up:"touchend",down:"touchstart",move:"touchmove"}}else{return{touch:isTouch,up:"mouseup",down:"mousedown",move:"mousemove"}}},_injectStyle:function(type,rule){var id=this._id+"-style-"+type;$("#"+id).remove();var div=$("<div />",{html:"&shy;<style>"+rule+"</style>"}).attr("id",id).hide().appendTo("body");return div},_guid:function(){function s4(){return Math.floor((1+Math.random())*65536).toString(16).substring(1)}return"aio-"+s4()+s4()+"-"+s4()+"-"+s4()+"-"+s4()+"-"+s4()+s4()+s4()}};$.widget("mguenter.allInOneTree",AIOTree)})(jQuery);