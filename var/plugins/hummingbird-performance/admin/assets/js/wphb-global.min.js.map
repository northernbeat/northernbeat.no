{"version":3,"file":"js/wphb-global.min.js","mappings":"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","sources":["webpack://wp-hummingbird/./_src/js/global.js"],"sourcesContent":["/* global wphbGlobal */\n\n( function() {\n\t'use strict';\n\n\tconst WPHBGlobal = {\n\t\tinit() {\n\t\t\tthis.registerClearAllCache();\n\t\t\tthis.registerClearNetworkCache();\n\t\t\tthis.registerClearCacheFromNotice();\n\t\t\tthis.registerClearCloudflare();\n\t\t\tthis.registerSafeModeActions();\n\t\t},\n\n\t\t/**\n\t\t * Clear selected module from admin bar.\n\t\t *\n\t\t * @since 3.0.1\n\t\t *\n\t\t * @param {string} module Module ID.\n\t\t */\n\t\tclearCache( module ) {\n\t\t\tjQuery\n\t\t\t\t.ajax( {\n\t\t\t\t\turl: wphbGlobal.ajaxurl,\n\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tnonce: wphbGlobal.nonce,\n\t\t\t\t\t\taction: 'wphb_clear_caches',\n\t\t\t\t\t\tmodules: [ module ],\n\t\t\t\t\t},\n\t\t\t\t} )\n\t\t\t\t.done( function() {\n\t\t\t\t\tlocation.reload();\n\t\t\t\t} );\n\t\t},\n\n\t\t/**\n\t\t * Clear all cache from admin bar.\n\t\t *\n\t\t * @since 3.0.1\n\t\t */\n\t\tregisterClearAllCache() {\n\t\t\tconst btn = document.getElementById(\n\t\t\t\t'wp-admin-bar-wphb-clear-all-cache'\n\t\t\t);\n\n\t\t\tif ( ! btn ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tbtn.addEventListener( 'click', () =>\n\t\t\t\tthis.post( 'wphb_global_clear_cache' )\n\t\t\t);\n\t\t},\n\n\t\t/**\n\t\t * Clear network cache.\n\t\t */\n\t\tregisterClearNetworkCache() {\n\t\t\tconst btn = document.querySelector(\n\t\t\t\t'#wp-admin-bar-wphb-clear-cache-network-wide > a'\n\t\t\t);\n\n\t\t\tif ( ! btn ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tbtn.addEventListener( 'click', () => {\n\t\t\t\tif ( 'undefined' === typeof window.WPHB_Admin ) {\n\t\t\t\t\twindow.location.href =\n\t\t\t\t\t\t'/wp-admin/network/admin.php?page=wphb-caching&update=open-ccnw';\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\twindow.SUI.openModal(\n\t\t\t\t\t'ccnw-modal',\n\t\t\t\t\t'wpbody',\n\t\t\t\t\t'ccnw-clear-now'\n\t\t\t\t);\n\t\t\t} );\n\t\t},\n\n\t\t/**\n\t\t * Clear cache from notice regarding plugin/theme updates.\n\t\t */\n\t\tregisterClearCacheFromNotice() {\n\t\t\tconst btn = document.getElementById(\n\t\t\t\t'wp-admin-notice-wphb-clear-cache'\n\t\t\t);\n\n\t\t\tif ( ! btn ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tbtn.addEventListener( 'click', () =>\n\t\t\t\tthis.post( 'wphb_global_clear_cache' )\n\t\t\t);\n\t\t},\n\n\t\t/**\n\t\t * Clear Cloudflare browser cache.\n\t\t *\n\t\t * @since 2.7.2\n\t\t */\n\t\tregisterClearCloudflare() {\n\t\t\tconst btn = document.querySelector(\n\t\t\t\t'#wp-admin-bar-wphb-clear-cloudflare > a'\n\t\t\t);\n\n\t\t\tif ( ! btn ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tbtn.addEventListener( 'click', () =>\n\t\t\t\tthis.post( 'wphb_front_clear_cloudflare' )\n\t\t\t);\n\t\t},\n\n\t\tcopyTextToClipboard: (text) => {\n\t\t\tconst textArea = document.createElement(\"textarea\");\n\t\t\ttextArea.value = text;\n\n\t\t\t// Avoid scrolling to bottom\n\t\t\ttextArea.style.top = \"0\";\n\t\t\ttextArea.style.left = \"0\";\n\t\t\ttextArea.style.position = \"fixed\";\n\n\t\t\tdocument.body.appendChild(textArea);\n\t\t\ttextArea.focus();\n\t\t\ttextArea.select();\n\n\t\t\ttry {\n\t\t\t\tdocument.execCommand('copy');\n\t\t\t} catch (err) {\n\t\t\t\tconsole.error('Oops, unable to copy', err);\n\t\t\t}\n\n\t\t\tdocument.body.removeChild(textArea);\n\t\t},\n\n\t\t/**\n\t\t * Regsiter safe mode actions.\n\t\t *\n\t\t * @since 3.4.0\n\t\t */\n\t\tregisterSafeModeActions() {\n\t\t\tconst saveButton = document.getElementById( 'wphb-ao-safe-mode-save' );\n\t\t\tif ( saveButton ) {\n\t\t\t\tsaveButton.addEventListener('click', () => {\n\t\t\t\t\tsaveButton.disabled = true;\n\t\t\t\t\tthis.request('wphb_react_minify_publish_safe_mode')\n\t\t\t\t\t\t.then(() => {\n\t\t\t\t\t\t\twindow.location.href = wphbGlobal.minify_url + '&safe_mode_status=published';\n\t\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tconst copyButton = document.getElementById('wphb-ao-safe-mode-copy');\n\t\t\tif (copyButton) {\n\t\t\t\tcopyButton.addEventListener('click', (e) => {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\tthis.copyTextToClipboard(window.location.href);\n\n\t\t\t\t\tconst successClass = 'wphb-ao-safe-mode-copy-success';\n\t\t\t\t\tcopyButton.classList.add(successClass);\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tcopyButton.classList.remove(successClass);\n\t\t\t\t\t}, 3000);\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Send AJAX request.\n\t\t *\n\t\t * @param {string}  action\n\t\t * @param {boolean} reload\n\t\t */\n\t\tpost(action, reload = true) {\n\t\t\tthis.request(action)\n\t\t\t\t.then(() => {\n\t\t\t\t\tif (reload) {\n\t\t\t\t\t\tlocation.reload(action)\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t},\n\n\t\trequest(action) {\n\t\t\treturn new Promise(resolve => {\n\t\t\t\tconst xhr = new XMLHttpRequest();\n\t\t\t\txhr.open('POST', wphbGlobal.ajaxurl + '?action=' + action + '&_ajax_nonce=' + wphbGlobal.nonce);\n\t\t\t\txhr.onload = function () {\n\t\t\t\t\tif (xhr.status === 200) {\n\t\t\t\t\t\tresolve();\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\txhr.send();\n\t\t\t});\n\t\t}\n\t};\n\n\tdocument.addEventListener( 'DOMContentLoaded', function() {\n\t\tWPHBGlobal.init();\n\t} );\n\n\twindow.WPHBGlobal = WPHBGlobal;\n}() );\n"],"names":["WPHBGlobal","init","registerClearAllCache","registerClearNetworkCache","registerClearCacheFromNotice","registerClearCloudflare","registerSafeModeActions","clearCache","module","jQuery","ajax","url","wphbGlobal","ajaxurl","method","data","nonce","action","modules","done","location","reload","btn","document","getElementById","addEventListener","post","querySelector","window","WPHB_Admin","href","SUI","openModal","copyTextToClipboard","text","textArea","createElement","value","style","top","left","position","body","appendChild","focus","select","execCommand","err","console","error","removeChild","saveButton","disabled","request","then","minify_url","copyButton","e","preventDefault","successClass","classList","add","setTimeout","remove","Promise","resolve","xhr","XMLHttpRequest","open","onload","status","send"],"sourceRoot":""}